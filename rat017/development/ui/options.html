<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/markdown/development/ui/options.md at 2024-10-22

 | Rendered using Apache Maven Default Skin
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>Apache Rat&trade; &#x2013; Options</title>
    <link rel="stylesheet" href="../../css/maven-base.css" />
    <link rel="stylesheet" href="../../css/maven-theme.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />
<link href="https://creadur.apache.org/font/matesc.css" type="text/css" rel="stylesheet" />
  </head>
  <body class="composite">
    <div id="banner">
<a href="https://www.apache.org/" id="bannerLeft"><img src="https://www.apache.org/img/asf_logo.png"  alt="The Apache Software Foundation" title="The Apache Software Foundation"/></a>      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">
        <span id="publishDate">Last Published: 2024-10-22</span>
           | <span id="projectVersion">Version: 0.17-SNAPSHOT</span>
          | <a href="https://www.apache.org/" class="externalLink" title="Apache">Apache</a> &gt;
<a href="https://creadur.apache.org/" class="externalLink" title="Creadur">Creadur</a> &gt;
<a href="https://creadur.apache.org/rat/" class="externalLink" title="Rat">Rat</a> &gt;
Options
      </div>
      <div class="xright">      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
       <h5>Apache Rat™</h5>
    <ul>
     <li class="none"><a href="../../index.html" title="Introducing Rat">Introducing Rat</a></li>
     <li class="none"><a href="../../download_rat.cgi" title="Downloads">Downloads</a></li>
     <li class="none"><a href="../../RELEASE_NOTES.txt" title="Changes">Changes</a></li>
    </ul>
       <h5>Rat from the Command Line</h5>
    <ul>
     <li class="none"><a href="../../apache-rat/index.html" title="Command Line Introduction">Command Line Introduction</a></li>
     <li class="none"><a href="../../apache-rat-core/exclusion_expression.html" title="Exclusion Expressions">Exclusion Expressions</a></li>
    </ul>
       <h5>Rat from Ant</h5>
    <ul>
     <li class="none"><a href="../../apache-rat-tasks/index.html" title="Ant Task Introduction">Ant Task Introduction</a></li>
    </ul>
       <h5>Rat from Maven</h5>
    <ul>
     <li class="none"><a href="../../apache-rat-plugin/index.html" title="Maven Plugin Introduction">Maven Plugin Introduction</a></li>
    </ul>
       <h5>Configuring Rat</h5>
    <ul>
     <li class="none"><a href="../../license_def.html" title="Defining New Licenses">Defining New Licenses</a></li>
     <li class="none"><a href="../../apache-rat/name_xref.html" title="Option Name Cross Reference">Option Name Cross Reference</a></li>
     <li class="none"><a href="../../apache-rat/default_licenses.html" title="Default Licenses, etc">Default Licenses, etc</a></li>
     <li class="none"><a href="../../apache-rat/xsd.html" title="Configuration XSD">Configuration XSD</a></li>
     <li class="none"><a href="https://gitbox.apache.org/repos/asf/creadur-rat/blob/master/apache-rat-core/src/main/resources/org/apache/rat/default.xml" class="externalLink" title="Default Configuration">Default Configuration</a></li>
    </ul>
       <h5>Rat Output</h5>
    <ul>
     <li class="none"><a href="../../apache-rat/output/example.html" title="Standard Output Example">Standard Output Example</a></li>
     <li class="none"><a href="https://gitbox.apache.org/repos/asf/creadur-rat/blob/master/apache-rat-core/src/main/resources/org/apache/rat/rat-report.xsd" class="externalLink" title="Output XSD">Output XSD</a></li>
     <li class="none"><a href="https://gitbox.apache.org/repos/asf/creadur-rat/blob/master/apache-rat-core/src/main/resources/org/apache/rat/plain-rat.xsl" class="externalLink" title="XSLT - Plain text">XSLT - Plain text</a></li>
     <li class="none"><a href="https://gitbox.apache.org/repos/asf/creadur-rat/blob/master/apache-rat-core/src/main/resources/org/apache/rat/missing-headers.xsl" class="externalLink" title="XSLT - Missing headers list">XSLT - Missing headers list</a></li>
     <li class="none"><a href="https://gitbox.apache.org/repos/asf/creadur-rat/blob/master/apache-rat-core/src/main/resources/org/apache/rat/unapproved-licenses.xsl" class="externalLink" title="XSLT - Unapproved licenses list">XSLT - Unapproved licenses list</a></li>
    </ul>
       <h5>Developing Rat</h5>
    <ul>
     <li class="none"><a href="../../architecture.html" title="Architecture">Architecture</a></li>
     <li class="none"><a href="../../apidocs/index.html" title="Javadocs">Javadocs</a></li>
     <li class="none"><a href="../../apache-rat-core/development/document_name.html" title="Document Name concept">Document Name concept</a></li>
     <li class="none"><a href="../../development/ui_implementation.html" title="UI Development">UI Development</a></li>
     <li class="none"><a href="../../apache-rat-core/development/write_file_processor.html" title="Writing a File Processor">Writing a File Processor</a></li>
    </ul>
       <h5>Apache Creadur™</h5>
    <ul>
     <li class="none"><a href="https://creadur.apache.org" class="externalLink" title="Creadur Project Home">Creadur Project Home</a></li>
     <li class="none"><a href="https://creadur.apache.org/tentacles" class="externalLink" title="Apache Tentacles">Apache Tentacles</a></li>
     <li class="none"><a href="https://creadur.apache.org/whisker" class="externalLink" title="Apache Whisker">Apache Whisker</a></li>
     <li class="none"><a href="https://www.apache.org/security/" class="externalLink" title="Security">Security</a></li>
     <li class="none"><a href="https://www.apache.org/licenses/" class="externalLink" title="License">License</a></li>
     <li class="none"><a href="https://privacy.apache.org/policies/privacy-policy-public.html" class="externalLink" title="Privacy">Privacy</a></li>
     <li class="none"><a href="https://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">Sponsorship</a></li>
     <li class="none"><a href="https://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">Thanks</a></li>
    </ul>
       <h5>The Apache Software Foundation</h5>
    <ul>
     <li class="none"><a href="https://www.apache.org/foundation" class="externalLink" title="About the Foundation">About the Foundation</a></li>
     <li class="none"><a href="https://projects.apache.org" class="externalLink" title="The projects">The projects</a></li>
     <li class="none"><a href="https://people.apache.org" class="externalLink" title="The people">The people</a></li>
     <li class="none"><a href="https://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How we work">How we work</a></li>
     <li class="none"><a href="https://www.apache.org/foundation/how-it-works.html#history" class="externalLink" title="Our history">Our history</a></li>
     <li class="none"><a href="https://blogs.apache.org/foundation/" class="externalLink" title="News">News</a></li>
    </ul>
       <h5>Contribute</h5>
    <ul>
     <li class="none"><a href="https://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">Get Involved</a></li>
    </ul>
       <h5>Committer Info</h5>
    <ul>
     <li class="none"><a href="https://www.apache.org/dev/committers.html" class="externalLink" title="ASF Committers' FAQ">ASF Committers' FAQ</a></li>
     <li class="none"><a href="https://www.apache.org/dev/new-committers-guide.html" class="externalLink" title="New Committers Guide">New Committers Guide</a></li>
     <li class="none"><a href="../../site-publish.html" title="Howto publish this site">Howto publish this site</a></li>
     <li class="none"><a href="https://community.apache.org/" class="externalLink" title="Community">Community</a></li>
     <li class="none"><a href="https://www.apache.org/legal/" class="externalLink" title="Legal">Legal</a></li>
     <li class="none"><a href="https://www.apache.org/foundation/marks/" class="externalLink" title="Branding">Branding</a></li>
     <li class="none"><a href="https://www.apache.org/press/" class="externalLink" title="Media Relations">Media Relations</a></li>
    </ul>
       <h5>Modules</h5>
    <ul>
     <li class="none"><a href="../../apache-rat-core/index.html" title="Apache Creadur Rat::Core">Apache Creadur Rat::Core</a></li>
     <li class="none"><a href="../../apache-rat-plugin/index.html" title="Apache Creadur Rat::Plugin4Maven">Apache Creadur Rat::Plugin4Maven</a></li>
     <li class="none"><a href="../../apache-rat-tasks/index.html" title="Apache Creadur Rat::Tasks4Ant">Apache Creadur Rat::Tasks4Ant</a></li>
     <li class="none"><a href="../../apache-rat/index.html" title="Apache Creadur Rat::Packaging">Apache Creadur Rat::Packaging</a></li>
     <li class="none"><a href="../../apache-rat-tools/index.html" title="Apache Creadur Rat::Tools">Apache Creadur Rat::Tools</a></li>
    </ul>
       <h5>Project Documentation</h5>
    <ul>
     <li class="collapsed"><a href="../../project-info.html" title="Project Information">Project Information</a></li>
     <li class="collapsed"><a href="../../project-reports.html" title="Project Reports">Project Reports</a></li>
    </ul>
      <a href="https://maven.apache.org/" title="Maven" class="poweredBy">
        <img class="poweredBy"  alt="Maven" src="https://maven.apache.org/images/logos/maven-feather.png"     />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
<!---
 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.
 The ASF licenses this file to You under the Apache License, Version 2.0
 (the "License"); you may not use this file except in compliance with
 the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<h1>Options</h1>
<blockquote>

<p>Up: <a href="../ui_implementation.html">UI Implementation</a>
<br />Options  | <a href="./generator.html">Generator</a> | <a href="./ui_specific.html">UI Specific</a></p>
</blockquote>
<p>In this section we will explore how the Rat core module exposes the information necessary to build a UI specific Option implementation.  We will be using the Maven tooling code in <code>apache-rat-tools</code> as the basis of the examples in this section.  As always, the current code base is the source of truth.</p>
<p>Rat core uses the Apache Commons CLI library to process command line options.  All the options are recorded in the <code>org.apache.rat.commandline.Arg</code> enumeration.  Internally the Arg enumeration contains logical option groups that represent a single option.  The use of option groups provides us a way to deprecate options and create replacements.  Only one option in an option group may be used in a single Rat invocation.</p>
<p>Each UI will have a representation of the individual Options specified within the Arg enumeration.  To simplify the code each UI implementation should have an implementation of the <code>org.apache.rat.tools.AbstractOption</code> class.  This class will map the information contained in the <code>org.apache.commons.cli.Option</code> into methods that make sense with respect to the UI being implemented.</p>
<p>As an example we will look at the <code>org.apache.rat.tools.MavenOption</code>.</p><section>
<h2><a name="MavenOption"></a>MavenOption</h2><section>
<h3><a name="Name_conversion"></a>Name conversion</h3>
<p>First to deal with the mapping from the kebab style to the camel case  style, the <code>MavenOption</code> utilizes a static method in the <code>MavenGenerator</code> class to perform the conversion.</p>

<div class="source">
<pre><code class="language-java">    static String createName(final Option option) {
        String name = StringUtils.defaultIfEmpty(option.getLongOpt(), option.getOpt());
        name = StringUtils.defaultIfEmpty(RENAME_MAP.get(name), name).toLowerCase(Locale.ROOT);
        return new CasedString(StringCase.KEBAB, name).toCase(StringCase.CAMEL);
    }
</code></pre></div>
<p>This method ensures that long options are selected over short options and then allows those options to be mapped to a different name.  The remapping is an historical case where there was a camel case option in the CLI that had to be converted to kebab case first.  In addition, it may be that a future CLI option will generate a camel case name that conflicts with some other UI based method.  The mapping allows that to be easily overcome.  Finally, the <code>createName</code> method uses the <code>org.apache.rat.utils.CasedString</code> and <code>org.apache.rat.utils.CasedString.StringCase</code> classes to convert the kebab case into the camel case.  This method will always yield a camel case that starts with a lower case letter.</p></section><section>
<h3><a name="Overridden_methods"></a>Overridden methods</h3>
<p>The AbstractOption has several methods that should be overridden.</p><section>
<h4><a name="cleanupName"></a>cleanupName</h4>
<p>The cleanup name method is called by the AbstractOption to convert the <code>org.apache.commons.cli.Option</code> name (kabob style) into the name expected in the configuration of the UI.  In the Maven case it returns the camel case name inside of angle brackets so that it appears as an XML element name.</p></section><section>
<h4><a name="getDefaultValue"></a>getDefaultValue</h4>
<p>The default value method will return the default value specified in the <code>org.apache.commons.cli.Option</code> unless it is overridden.</p>
<p>Maven allows the definition of default values for its options.  The class <code>org.apache.rat.tools.MavenOption</code> defines the default values for the CLI options that have default values in Maven.  For example, the Maven environment expects the output of the tool to be written to a file and not displayed on standard out so this value is set as the default.</p></section></section><section>
<h3><a name="Generating_the_method_signature"></a>Generating the method signature</h3>
<p>The MavenGenerator needs to generate method signatures based on the <code>org.apache.commons.cli.Option</code> state so the MavenOption provides the <code>getMethodSignature</code> method.  This method checks the following conditions.</p>
<ol style="list-style-type: decimal">

<li>Is the option deprecated? If so add the <code>@Deprecated</code> annotation.</li>
<li>Does the option accept one or more arguments (i.e. is not a flag option)? If it does the argument should be a <code>String</code> otherwise it should be a <code>boolean</code>.</li>
<li>Does the method accept multiple arguments?  If so modify the name to indicate plural as per the Maven standard.</li>
<li>Create the Maven <code>@Property</code> annotation with optional Maven command line property and defaults for the method.</li>
<li>Write all the information into a string and prefix the method name with &#x201c;set&#x201d; as per the Maven standard.</li>
</ol></section></section><section>
<h2><a name="AntOption"></a>AntOption</h2>
<p>The <code>AntOption</code> class is very similar to the <code>MavenOption</code> except that, as noted earlier, it creates XML Elements and Attributes depending on whether the option accepts more than one argument.</p>
<blockquote>

<p>Up: <a href="../ui_implementation.html">UI Implementation</a>
<br />Options | <a href="./generator.html">Generator</a> | <a href="./ui_specific.html">UI Specific</a></p>
</blockquote></section>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &copy; 2016-2024 The Apache Software Foundation, Licensed under the Apache License, Version 2.0.
      Apache Creadur, Creadur, Apache Rat, Apache Tentacles, Apache Whisker, Apache and the Apache feather logo are trademarks
      of The Apache Software Foundation.
      Oracle and Java are registered trademarks of Oracle and/or its affiliates.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
