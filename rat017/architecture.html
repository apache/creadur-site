<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/markdown/architecture.md at 2024-10-22

 | Rendered using Apache Maven Default Skin
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>Apache Rat&trade; &#x2013; Overview</title>
    <link rel="stylesheet" href="./css/maven-base.css" />
    <link rel="stylesheet" href="./css/maven-theme.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
<link href="https://creadur.apache.org/font/matesc.css" type="text/css" rel="stylesheet" />
  </head>
  <body class="composite">
    <div id="banner">
<a href="https://www.apache.org/" id="bannerLeft"><img src="https://www.apache.org/img/asf_logo.png"  alt="The Apache Software Foundation" title="The Apache Software Foundation"/></a>      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">
        <span id="publishDate">Last Published: 2024-10-22</span>
           | <span id="projectVersion">Version: 0.17-SNAPSHOT</span>
          | <a href="https://www.apache.org/" class="externalLink" title="Apache">Apache</a> &gt;
<a href="https://creadur.apache.org/" class="externalLink" title="Creadur">Creadur</a> &gt;
<a href="https://creadur.apache.org/rat/" class="externalLink" title="Rat">Rat</a> &gt;
Overview
      </div>
      <div class="xright">      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
       <h5>Apache Rat™</h5>
    <ul>
     <li class="none"><a href="index.html" title="Introducing Rat">Introducing Rat</a></li>
     <li class="none"><a href="download_rat.cgi" title="Downloads">Downloads</a></li>
     <li class="none"><a href="RELEASE_NOTES.txt" title="Changes">Changes</a></li>
    </ul>
       <h5>Rat from the Command Line</h5>
    <ul>
     <li class="none"><a href="apache-rat/index.html" title="Command Line Introduction">Command Line Introduction</a></li>
     <li class="none"><a href="apache-rat-core/exclusion_expression.html" title="Exclusion Expressions">Exclusion Expressions</a></li>
    </ul>
       <h5>Rat from Ant</h5>
    <ul>
     <li class="none"><a href="apache-rat-tasks/index.html" title="Ant Task Introduction">Ant Task Introduction</a></li>
    </ul>
       <h5>Rat from Maven</h5>
    <ul>
     <li class="none"><a href="apache-rat-plugin/index.html" title="Maven Plugin Introduction">Maven Plugin Introduction</a></li>
    </ul>
       <h5>Configuring Rat</h5>
    <ul>
     <li class="none"><a href="license_def.html" title="Defining New Licenses">Defining New Licenses</a></li>
     <li class="none"><a href="apache-rat/name_xref.html" title="Option Name Cross Reference">Option Name Cross Reference</a></li>
     <li class="none"><a href="apache-rat/default_licenses.html" title="Default Licenses, etc">Default Licenses, etc</a></li>
     <li class="none"><a href="apache-rat/xsd.html" title="Configuration XSD">Configuration XSD</a></li>
     <li class="none"><a href="https://gitbox.apache.org/repos/asf/creadur-rat/blob/master/apache-rat-core/src/main/resources/org/apache/rat/default.xml" class="externalLink" title="Default Configuration">Default Configuration</a></li>
    </ul>
       <h5>Rat Output</h5>
    <ul>
     <li class="none"><a href="apache-rat/output/example.html" title="Standard Output Example">Standard Output Example</a></li>
     <li class="none"><a href="https://gitbox.apache.org/repos/asf/creadur-rat/blob/master/apache-rat-core/src/main/resources/org/apache/rat/rat-report.xsd" class="externalLink" title="Output XSD">Output XSD</a></li>
     <li class="none"><a href="https://gitbox.apache.org/repos/asf/creadur-rat/blob/master/apache-rat-core/src/main/resources/org/apache/rat/plain-rat.xsl" class="externalLink" title="XSLT - Plain text">XSLT - Plain text</a></li>
     <li class="none"><a href="https://gitbox.apache.org/repos/asf/creadur-rat/blob/master/apache-rat-core/src/main/resources/org/apache/rat/missing-headers.xsl" class="externalLink" title="XSLT - Missing headers list">XSLT - Missing headers list</a></li>
     <li class="none"><a href="https://gitbox.apache.org/repos/asf/creadur-rat/blob/master/apache-rat-core/src/main/resources/org/apache/rat/unapproved-licenses.xsl" class="externalLink" title="XSLT - Unapproved licenses list">XSLT - Unapproved licenses list</a></li>
    </ul>
       <h5>Developing Rat</h5>
    <ul>
     <li class="none"><strong>Architecture</strong></li>
     <li class="none"><a href="apidocs/index.html" title="Javadocs">Javadocs</a></li>
     <li class="none"><a href="apache-rat-core/development/document_name.html" title="Document Name concept">Document Name concept</a></li>
     <li class="none"><a href="development/ui_implementation.html" title="UI Development">UI Development</a></li>
     <li class="none"><a href="apache-rat-core/development/write_file_processor.html" title="Writing a File Processor">Writing a File Processor</a></li>
    </ul>
       <h5>Apache Creadur™</h5>
    <ul>
     <li class="none"><a href="https://creadur.apache.org" class="externalLink" title="Creadur Project Home">Creadur Project Home</a></li>
     <li class="none"><a href="https://creadur.apache.org/tentacles" class="externalLink" title="Apache Tentacles">Apache Tentacles</a></li>
     <li class="none"><a href="https://creadur.apache.org/whisker" class="externalLink" title="Apache Whisker">Apache Whisker</a></li>
     <li class="none"><a href="https://www.apache.org/security/" class="externalLink" title="Security">Security</a></li>
     <li class="none"><a href="https://www.apache.org/licenses/" class="externalLink" title="License">License</a></li>
     <li class="none"><a href="https://privacy.apache.org/policies/privacy-policy-public.html" class="externalLink" title="Privacy">Privacy</a></li>
     <li class="none"><a href="https://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">Sponsorship</a></li>
     <li class="none"><a href="https://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">Thanks</a></li>
    </ul>
       <h5>The Apache Software Foundation</h5>
    <ul>
     <li class="none"><a href="https://www.apache.org/foundation" class="externalLink" title="About the Foundation">About the Foundation</a></li>
     <li class="none"><a href="https://projects.apache.org" class="externalLink" title="The projects">The projects</a></li>
     <li class="none"><a href="https://people.apache.org" class="externalLink" title="The people">The people</a></li>
     <li class="none"><a href="https://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How we work">How we work</a></li>
     <li class="none"><a href="https://www.apache.org/foundation/how-it-works.html#history" class="externalLink" title="Our history">Our history</a></li>
     <li class="none"><a href="https://blogs.apache.org/foundation/" class="externalLink" title="News">News</a></li>
    </ul>
       <h5>Contribute</h5>
    <ul>
     <li class="none"><a href="https://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">Get Involved</a></li>
    </ul>
       <h5>Committer Info</h5>
    <ul>
     <li class="none"><a href="https://www.apache.org/dev/committers.html" class="externalLink" title="ASF Committers' FAQ">ASF Committers' FAQ</a></li>
     <li class="none"><a href="https://www.apache.org/dev/new-committers-guide.html" class="externalLink" title="New Committers Guide">New Committers Guide</a></li>
     <li class="none"><a href="site-publish.html" title="Howto publish this site">Howto publish this site</a></li>
     <li class="none"><a href="https://community.apache.org/" class="externalLink" title="Community">Community</a></li>
     <li class="none"><a href="https://www.apache.org/legal/" class="externalLink" title="Legal">Legal</a></li>
     <li class="none"><a href="https://www.apache.org/foundation/marks/" class="externalLink" title="Branding">Branding</a></li>
     <li class="none"><a href="https://www.apache.org/press/" class="externalLink" title="Media Relations">Media Relations</a></li>
    </ul>
       <h5>Modules</h5>
    <ul>
     <li class="none"><a href="apache-rat-core/index.html" title="Apache Creadur Rat::Core">Apache Creadur Rat::Core</a></li>
     <li class="none"><a href="apache-rat-plugin/index.html" title="Apache Creadur Rat::Plugin4Maven">Apache Creadur Rat::Plugin4Maven</a></li>
     <li class="none"><a href="apache-rat-tasks/index.html" title="Apache Creadur Rat::Tasks4Ant">Apache Creadur Rat::Tasks4Ant</a></li>
     <li class="none"><a href="apache-rat/index.html" title="Apache Creadur Rat::Packaging">Apache Creadur Rat::Packaging</a></li>
     <li class="none"><a href="apache-rat-tools/index.html" title="Apache Creadur Rat::Tools">Apache Creadur Rat::Tools</a></li>
    </ul>
       <h5>Project Documentation</h5>
    <ul>
     <li class="collapsed"><a href="project-info.html" title="Project Information">Project Information</a></li>
     <li class="collapsed"><a href="project-reports.html" title="Project Reports">Project Reports</a></li>
    </ul>
      <a href="https://maven.apache.org/" title="Maven" class="poweredBy">
        <img class="poweredBy"  alt="Maven" src="https://maven.apache.org/images/logos/maven-feather.png"     />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
<!---
 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.
 The ASF licenses this file to You under the Apache License, Version 2.0
 (the "License"); you may not use this file except in compliance with
 the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<h1>Overview</h1>
<p>The RAT architecture is build around a single engine that parses input files to build an XML based report.  User interfaces (UIs) create and configure a <code>ReportConfiguration</code> which is passed to a <code>Reporter</code> instance which performs all the processing.</p>

<div class="source">
<pre><code>/------\    /------\    /------\
| CLI  |    |Maven |    | Ant  |
|  UI  |    |  UI  |    |  UI  |
\--+---/    \--+---/    \--+---/
   |           |           |
   \-----------+-----------/     ReportConfiguration
               |                   input to Reporter
          /----+----\
          | Reporter| &lt;---  Multiple files and directories
          \----+----/
               |
               V
            Report

</code></pre></div>
<h1>Configuration</h1>
<p>The <code>ReportConfiguration</code> contains all the options for the Reporter class.  User interfaces create a <code>ReportConfiguration</code> and pass it to the <code>Reporter</code> instance for execution. The configuraiton specifies the configuraiton for:</p>
<ul>

<li>License Families &#x2013; An identifier for families of licenses that share the same constraints.  The default list is defined in the <code>o.a.r.default.xml</code> file in the families section.</li>
<li>Licenses &#x2013; the definition of a license that defines the matchers that comprise the test for the license.  The default licenses are defined in the  <code>o.a.r.default.xml</code> file in the licenses section.</li>
<li>Approved License Families &#x2013; A list of license families that are approved.  Licenses of families not in this are unapproved.  The defualt approved license families are defined in the  <code>o.a.r.default.xml</code> file in the approved section.</li>
</ul><section>
<h2><a name="License_Families"></a>License Families</h2>
<p>A license family comprises an ID and a name.  New families may be added to the <code>o.a.r.default.xml</code> file or programattically from the UI.  License family IDs must be unique.  Later ID definitions override earlier definitions.</p></section><section>
<h2><a name="License"></a>License</h2>
<p>A license definition comprises a family (identified by its ID), and a matcher.  Licenses adopt the ID of their family which may be overridden with an id attribute.  Licenses also adopt the name of their family unless it is overridden by a name attribute.</p></section><section>
<h2><a name="Approved_Licenses"></a>Approved Licenses</h2>
<p>The approved licenses are enumerated in a list.  Licenses are selected by family and the family ID is specified in the list.</p></section><section>
<h2><a name="Matchers"></a>Matchers</h2>
<p>Matchers are classes that implement specific tests.  They are created by builders.  The default builders are specified in the  <code>o.a.r.default.xml</code> file in the matchers section.</p><section>
<h3><a name="Matcher.Builder"></a>Matcher.Builder</h3>
<p>New matcher builders may be defined within the <code>o.a.r.default.xml</code> file and then used in the license definitions within the file.</p>
<p>Matcher builder class names must be of the form <code>&lt;name&gt;Builder</code> where <code>&lt;name&gt;</code> becomes the name of the matcher and is used in identifying the matcher to use (e.g. as a tag in the License section of the <code>o.a.r.default.xml</code> file).  They must also implement the <code>o.a.r.analysis.IHeaderMatcher.Builder</code> interface.</p></section></section><section>
<h2><a name="flags_to_add_licenses_and_copyrights_to_files"></a>flags to add licenses and copyrights to files</h2>
<p>The configuration has a set of options to add licenses and optionally copyright notices to files that do not have them.
The <code>addLicenses</code> option adds the Apache2 license to files that do not have any license specified.
If the <code>copyright</code> text is provided it is also added to the files.
The <code>addLicensesForced</code> modifies the way the licenses are added, by default the licenses are added to new files with name of the old file but a <code>.new</code> extension added.
If <code>addLicensesForced</code> is specified then the files are overwritten.</p></section><section>
<h2><a name="file_name_filter"></a>file name filter</h2>
<p>The file name filter specifies a filter to be used to filter out any files that should not be evaluated.</p></section><section>
<h2><a name="out"></a>out</h2>
<p>The <code>out</code> parameter specifies an <code>OutputStream</code> IOSupplier that is used to create the output stream to write text to.  By default, this is the <code>System.out</code> stream.</p></section><section>
<h2><a name="stylesheet"></a>stylesheet</h2>
<p>the <code>styleSheet</code> parameter specifies the <code>InputStream</code> IOSupplier that is used to read the stylesheet that styles the XML output.</p></section><section>
<h2><a name="IReportable"></a>IReportable</h2>
<p>The <code>IReportable</code> parameter identifies the objects that the report should run against.
Implementations of <code>IReportable</code> generally do things like walk directory trees, or archives.</p>
<h1>Reporter</h1>
<p>The reporter uses the <code>ReporterConfiguration</code> to configure the report.  It then begins to read the files.
Each file is a <code>Document</code> the reporter determines the Document type and if appropriate reads the header information (50 lines) from the document.</p>
<p>The header information is passed to the licenses.  The processing of the file stops when a license is triggered (found) or the end of the header is reached.</p>
<p>The information retrieved is used to create an XML document that may be styled by the defined stylesheet.</p>
<p>The reporter utilizes the <code>RatReport</code> interface to determine what actions to take with the documents.
Currently the <code>RatReport</code> interface is used to define license adding capabilities, report claim aggregation, and multiplexed reports.
Additional capabilities can be implemented by implementing a <code>RatReport</code> and inserting it into the processing chain.</p></section>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &copy; 2016-2024 The Apache Software Foundation, Licensed under the Apache License, Version 2.0.
      Apache Creadur, Creadur, Apache Rat, Apache Tentacles, Apache Whisker, Apache and the Apache feather logo are trademarks
      of The Apache Software Foundation.
      Oracle and Java are registered trademarks of Oracle and/or its affiliates.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
